import{s as z,n as $,o as B}from"../chunks/scheduler.YQe7PuaW.js";import{S as U,i as F,e as D,a as N,f as b,g as w,s as E,m as M,h as v,j as C,y as H,c as I,n as S,k,x as m,o as P,z as Y,B as K}from"../chunks/index.M88L6zut.js";import{e as q}from"../chunks/each.-oqiv04n.js";import{b as T}from"../chunks/paths.97B8yAJj.js";import{r as j}from"../chunks/riddles.UjxbB1Zd.js";import{i as O,g as Q,a as V,q as x,w as G,c as J}from"../chunks/index.esm2017.EH9H407I.js";function A(r,t,e){const n=r.slice();return n[7]=t[e],n}function L(r){let t,e,n="<center>The Forgotten Speakeasy</center>",d,i,p="View Leaderboard >",_,g,f,a,u,h=q(j),o=[];for(let s=0;s<h.length;s+=1)o[s]=R(A(r,h,s));return{c(){t=w("center"),e=w("h1"),e.innerHTML=n,d=E(),i=w("a"),i.textContent=p,_=E();for(let s=0;s<o.length;s+=1)o[s].c();g=E(),f=w("h4"),a=M(r[2]),u=M(" until midnight"),this.h()},l(s){t=v(s,"CENTER",{class:!0});var c=C(t);e=v(c,"H1",{"data-svelte-h":!0}),H(e)!=="svelte-j5h4ty"&&(e.innerHTML=n),d=I(c),i=v(c,"A",{class:!0,href:!0,"data-svelte-h":!0}),H(i)!=="svelte-31dsbo"&&(i.textContent=p),_=I(c);for(let y=0;y<o.length;y+=1)o[y].l(c);g=I(c),f=v(c,"H4",{});var l=C(f);a=S(l,r[2]),u=S(l," until midnight"),l.forEach(b),c.forEach(b),this.h()},h(){k(i,"class","inline"),k(i,"href",`${T}/leaderboard/`),k(t,"class","fade-in")},m(s,c){N(s,t,c),m(t,e),m(t,d),m(t,i),m(t,_);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);m(t,g),m(t,f),m(f,a),m(f,u)},p(s,c){if(c&1){h=q(j);let l;for(l=0;l<h.length;l+=1){const y=A(s,h,l);o[l]?o[l].p(y,c):(o[l]=R(y),o[l].c(),o[l].m(t,g))}for(;l<o.length;l+=1)o[l].d(1);o.length=h.length}c&4&&P(a,s[2])},d(s){s&&b(t),Y(o,s)}}}function R(r){let t,e,n=r[7].copy+"",d,i,p,_;function g(){return r[3](r[7])}return{c(){t=w("center"),e=w("button"),d=M(n),this.h()},l(f){t=v(f,"CENTER",{});var a=C(t);e=v(a,"BUTTON",{class:!0});var u=C(e);d=S(u,n),u.forEach(b),a.forEach(b),this.h()},h(){e.disabled=i=r[0].includes(r[7].id.toString()),k(e,"class","button svelte-1v5hjf9")},m(f,a){N(f,t,a),m(t,e),m(e,d),p||(_=K(e,"click",g),p=!0)},p(f,a){r=f,a&1&&i!==(i=r[0].includes(r[7].id.toString()))&&(e.disabled=i)},d(f){f&&b(t),p=!1,_()}}}function W(r){let t,e=r[1]&&L(r);return{c(){e&&e.c(),t=D()},l(n){e&&e.l(n),t=D()},m(n,d){e&&e.m(n,d),N(n,t,d)},p(n,[d]){n[1]?e?e.p(n,d):(e=L(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:$,o:$,d(n){n&&b(t),e&&e.d(n)}}}function X(r,t,e){let n=null,d=[],i=!1,p="0:0:0";B(()=>{let a=localStorage.getItem("sh-playerName");const u={apiKey:"AIzaSyDPp3Yxy7rQNCy10DcMR8wY2227HoU_tyg",authDomain:"nye-scavenger-hunt.firebaseapp.com",projectId:"nye-scavenger-hunt",storageBucket:"nye-scavenger-hunt.appspot.com",messagingSenderId:"471479988691",appId:"1:471479988691:web:21e77b6bd4348bbc31bf26"};if(!a)window.location.href=`${T}/user`;else{const h=O(u);n=Q(h),_(a).then(o=>{e(0,d=o.map(s=>s.questionId)),e(1,i=!0)})}g()});async function _(a){return V(x(J(n,"user-answers"),G("name","==",a))).then(u=>u.docs.map(h=>h.data()))}function g(){const a=new Date;a.setHours(24,0,0,0),setInterval(()=>{const h=a-new Date,o=Math.floor(h/(1e3*60*60)%24),s=Math.floor(h/(1e3*60)%60),c=Math.floor(h/1e3%60);e(2,p=`${o}:${s}:${c}`)},1e3)}return[d,i,p,a=>{window.location.href=`${T}/riddle?q=${a.id}`}]}class oe extends U{constructor(t){super(),F(this,t,X,W,z,{})}}export{oe as component};
