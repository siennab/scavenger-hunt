import{s as Z,n as j,e as $,o as ee,h as te,r as ae}from"../chunks/scheduler.YQe7PuaW.js";import{S as ne,i as se,e as H,a as P,f as C,g as d,s as k,m as Q,h as m,j as N,y as R,c as q,n as J,k as S,x as i,A as M,B as z,o as V,C as W}from"../chunks/index.M88L6zut.js";import{p as le}from"../chunks/stores.G1ewZDUD.js";import{i as re,g as oe,u as ie,d as ue,b as ce,c as F,a as fe,q as pe,w as Y}from"../chunks/index.esm2017.EH9H407I.js";import{b as X}from"../chunks/paths.97B8yAJj.js";import{r as de}from"../chunks/riddles.UjxbB1Zd.js";function G(r){let e,t,a="The Forgotten Speakeasy",c,o,l="< Go Back",s,h,g=r[0].copy+"",I,B,b,f="Enter the number of the label on the item you found",y,_,A,w,T,E,v,x="âœ“",D,L,u=r[2]&&K(r);return{c(){e=d("center"),t=d("h1"),t.textContent=a,c=k(),o=d("a"),o.textContent=l,s=k(),h=d("h2"),I=Q(g),B=k(),b=d("label"),b.textContent=f,y=d("br"),_=d("br"),A=k(),w=d("input"),T=k(),u&&u.c(),E=k(),v=d("button"),v.textContent=x,this.h()},l(p){e=m(p,"CENTER",{class:!0});var n=N(e);t=m(n,"H1",{"data-svelte-h":!0}),R(t)!=="svelte-q9sr6h"&&(t.textContent=a),c=q(n),o=m(n,"A",{class:!0,href:!0,"data-svelte-h":!0}),R(o)!=="svelte-94obmw"&&(o.textContent=l),s=q(n),h=m(n,"H2",{});var U=N(h);I=J(U,g),U.forEach(C),B=q(n),b=m(n,"LABEL",{for:!0,"data-svelte-h":!0}),R(b)!=="svelte-1npglxg"&&(b.textContent=f),y=m(n,"BR",{}),_=m(n,"BR",{}),A=q(n),w=m(n,"INPUT",{type:!0}),T=q(n),u&&u.l(n),E=q(n),v=m(n,"BUTTON",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-1ddyvj1"&&(v.textContent=x),n.forEach(C),this.h()},h(){S(o,"class","inline"),S(o,"href",`${X}/riddles/`),S(b,"for","answer"),S(w,"type","number"),S(v,"class","button"),S(e,"class","fade-in")},m(p,n){P(p,e,n),i(e,t),i(e,c),i(e,o),i(e,s),i(e,h),i(h,I),i(e,B),i(e,b),i(e,y),i(e,_),i(e,A),i(e,w),M(w,r[1]),i(e,T),u&&u.m(e,null),i(e,E),i(e,v),D||(L=[z(w,"input",r[4]),z(v,"click",r[3])],D=!0)},p(p,n){n&1&&g!==(g=p[0].copy+"")&&V(I,g),n&2&&W(w.value)!==p[1]&&M(w,p[1]),p[2]?u?u.p(p,n):(u=K(p),u.c(),u.m(e,E)):u&&(u.d(1),u=null)},d(p){p&&C(e),u&&u.d(),D=!1,ae(L)}}}function K(r){let e,t,a,c,o;return{c(){e=d("br"),t=k(),a=d("small"),c=d("br"),o=Q(r[2])},l(l){e=m(l,"BR",{}),t=q(l),a=m(l,"SMALL",{});var s=N(a);c=m(s,"BR",{}),o=J(s,r[2]),s.forEach(C)},m(l,s){P(l,e,s),P(l,t,s),P(l,a,s),i(a,c),i(a,o)},p(l,s){s&4&&V(o,l[2])},d(l){l&&(C(e),C(t),C(a))}}}function me(r){let e,t=r[0]&&G(r);return{c(){t&&t.c(),e=H()},l(a){t&&t.l(a),e=H()},m(a,c){t&&t.m(a,c),P(a,e,c)},p(a,[c]){a[0]?t?t.p(a,c):(t=G(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:j,o:j,d(a){a&&C(e),t&&t.d(a)}}}function O(r){let e=100;return r>0&&(e=60,e=e-(r-1)*10),e}function he(r,e,t){let a;$(r,le,f=>t(7,a=f));let c=de,o=null,l=null,s=null,h=null,g=null;ee(()=>{const y=re({apiKey:"AIzaSyDPp3Yxy7rQNCy10DcMR8wY2227HoU_tyg",authDomain:"nye-scavenger-hunt.firebaseapp.com",projectId:"nye-scavenger-hunt",storageBucket:"nye-scavenger-hunt.appspot.com",messagingSenderId:"471479988691",appId:"1:471479988691:web:21e77b6bd4348bbc31bf26"});l=oe(y),t(0,o=c.find(_=>_.id==h))}),te(()=>{h=a.url.searchParams.get("q")});async function I(f){return(await fe(pe(F(l,"user-answers"),Y("answerId","==",f),Y("questionId","==",h)))).docs}async function B(){if(!o.valid_ids.includes(s)){t(2,g="That's not a valid number! Try again.");return}const f=await I(s);for(let _=0;_<f.length;_++){const A=O(f.length+1);await ie(ue(l,"user-answers",f[_].id),{points:A})}const y=O(f.length+1);await ce(F(l,"user-answers"),{name:window.localStorage.getItem("sh-playerName"),answerId:s,questionId:h,points:y}),window.location.href=`${X}/riddles/`}function b(){s=W(this.value),t(1,s)}return[o,s,g,B,b]}class Ce extends ne{constructor(e){super(),se(this,e,he,me,Z,{})}}export{Ce as component};
